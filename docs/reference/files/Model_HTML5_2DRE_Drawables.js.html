<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Model&#x2F;HTML5_2DRE_Drawables.js - Eracle HTML5_2DRE</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets&#x2F;css&#x2F;logo.jpg" title="Eracle HTML5_2DRE"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: Eracle HTML5_2DRE<br />
             version: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Array.html">Array</a></li>
            
                <li><a href="..&#x2F;classes/BaseDrawable.html">BaseDrawable</a></li>
            
                <li><a href="..&#x2F;classes/Boolean.html">Boolean</a></li>
            
                <li><a href="..&#x2F;classes/ButtonDrawable.html">ButtonDrawable</a></li>
            
                <li><a href="..&#x2F;classes/Controller.html">Controller</a></li>
            
                <li><a href="..&#x2F;classes/Date.html">Date</a></li>
            
                <li><a href="..&#x2F;classes/HTML5_2DRE.html">HTML5_2DRE</a></li>
            
                <li><a href="..&#x2F;classes/Model.html">Model</a></li>
            
                <li><a href="..&#x2F;classes/Number.html">Number</a></li>
            
                <li><a href="..&#x2F;classes/Object.html">Object</a></li>
            
                <li><a href="..&#x2F;classes/RectangleDrawable.html">RectangleDrawable</a></li>
            
                <li><a href="..&#x2F;classes/SpriteDrawable.html">SpriteDrawable</a></li>
            
                <li><a href="..&#x2F;classes/String.html">String</a></li>
            
                <li><a href="..&#x2F;classes/TextDrawable.html">TextDrawable</a></li>
            
                <li><a href="..&#x2F;classes/View.html">View</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/Controller.html">Controller</a></li>
            
                <li><a href="..&#x2F;modules/Drawables.html">Drawables</a></li>
            
                <li><a href="..&#x2F;modules/Model.html">Model</a></li>
            
                <li><a href="..&#x2F;modules/root.html">root</a></li>
            
                <li><a href="..&#x2F;modules/View.html">View</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: Model&#x2F;HTML5_2DRE_Drawables.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;&#x2F; Copyright (c) 2012 All Right Reserved, Eracle Software and Thomas van der Berg
&#x2F;&#x2F;
&#x2F;&#x2F; This source is subject to the Eracle License.
&#x2F;&#x2F; Please see the license page on http:&#x2F;&#x2F;eraclesoftware.com&#x2F;legal&#x2F; file for more information.
&#x2F;&#x2F; All other rights reserved.
&#x2F;&#x2F;
&#x2F;&#x2F; THIS CODE AND INFORMATION ARE PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF ANY 
&#x2F;&#x2F; KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
&#x2F;&#x2F; IMPLIED WARRANTIES OF MERCHANTABILITY AND&#x2F;OR FITNESS FOR A
&#x2F;&#x2F; PARTICULAR PURPOSE.
&#x2F;&#x2F;
&#x2F;&#x2F; authors:	Ylon Schaeffer, Thomas van der Berg
&#x2F;&#x2F; email:	yschaeffer@eraclesoftware.com, thomas.van.der.berg@hotmail.com
&#x2F;&#x2F; date:	14-11-2012
&#x2F;&#x2F; summary:	Contains the basic MVC Objects for the HTML5_2DREngine.

&#x2F;&#x2F; -------------------------------------------------------------------------------------------------------------
&#x2F;&#x2F;
&#x2F;&#x2F;	Class: Drawables
&#x2F;&#x2F;	This section contains all base drawable objects. These can be used as a basis for game-specific objects.
&#x2F;&#x2F; -------------------------------------------------------------------------------------------------------------

&#x2F;**
This section contains all base drawable objects. These can be used as a basis for game-specific objects.
@module Model
@submodule Drawables
@main Model
*&#x2F;
Model.Drawables = {};
&#x2F;**
This is the base drawable class from which all drawable objects inherit. It can also be used on its own as an empty object which contains children.
@class BaseDrawable
*&#x2F;

Model.Drawables.BaseDrawable = {
	&#x2F;**
	The name of this object.
	@property name
	@type string
	@default &quot;Rectangle&quot;
	*&#x2F;
	name			: 	&quot;Rectangle&quot;,
	&#x2F;** 
	Where the variable will be drawn in pixels of the canvas. Relative to its parent if it has one.
	@property position
	@type Object
	@default { x:0, y:0 }
	*&#x2F;
	position		: 	{ x:0, y:0 },
	&#x2F;**
	The size of the object is used to draw the object and to check for mouse input. Make sure all buttons that are childs of this object fall inside its size.
	@property size
	@type Object
	@default { x:1, y:1 }
	*&#x2F;
	size			: 	{ x:1, y:1 },
	&#x2F;**
	Used to scale the size.
	@property scale
	@type Object
	@default { x:1, y:1 };
	*&#x2F;
	scale			: 	{ x:1, y:1 },
	&#x2F;**
	Determines its rotation in radians. Relative to its parent if it has one.
	@property rotation
	@type  Number
	@default 0
	*&#x2F;
	rotation		:	0,
	&#x2F;**
	The depth of this object is stored in here, changing this wont have effect.
	@property depth
	@type Number
	@default 0
	*&#x2F;
	depth			:	0,
	&#x2F;**
	Determines the colour to draw it with, if applicable.
	@property color
	@type String
	@default &quot;#000000&quot;
	*&#x2F;
	color			:	&quot;#000000&quot;,
	&#x2F;**
	Determines its alpha channel between 1 and 0.
	@property alpha
	@type Float&#x2F;Double
	@default 1
	*&#x2F;
	alpha			:	1,
	&#x2F;**
	Determines whether it is visible (boolean).
	@property visible
	@type Boolean
	@default true
	*&#x2F;
	visible			:	true,
	&#x2F;**
	Determines if the objct is active, if it is the update method will be called.
	@property active
	@type Boolean
	@default true
	*&#x2F;
	active			:	true,
	&#x2F;**
	Contains its parent. If the object has no parent, it contains &quot;null&quot;.
	@property parent
	@type Object
	@default null
	*&#x2F;
	parent			:	null,
	&#x2F;**
	Array which contains all of its children.
	@property drawableObjects
	@type Array
	@default Empty array
	*&#x2F;
	drawableObjects		:	new Array(),
	&#x2F;**
	Determines which type of cursor is used when the mouse hovers over the object.
	@property cursor
	@type String
	@default &quot;default&quot;
	*&#x2F;
	cursor			:	&quot;default&quot;,
	
	&#x2F;**
	This function will be called when this object is being cloned.
	@method onCloneInit
	*&#x2F;
	onCloneInit		:	function() {},
	&#x2F;**
	This function will be called when this object has been added into the drawable list.
	@method onDrawInit
	*&#x2F;
	onDrawInit		:	function() {},
	&#x2F;**
	Will check if this object is visible and if so will render itself to the canvas plus all its children.
	@method base_draw
	@param ctx {Object} Requires the canvas context element.
	@return {Boolean} returns false if this object is not visible
	*&#x2F;
	base_draw	 	: 	function(ctx)
						{
							if(!this.visible)
								return false;
							
							this.draw(ctx);
							ctx.translate(-(this.size.x &#x2F; 2), -(this.size.y &#x2F; 2));
							
							for(var i = 0; i &lt; this.drawableObjects.length; i++)
								if(this.drawableObjects[i])
								{
									ctx.save();
									ctx.translate(this.drawableObjects[i].position.x + (this.drawableObjects[i].size.x &#x2F; 2), this.drawableObjects[i].position.y + (this.drawableObjects[i].size.y &#x2F; 2));
									ctx.rotate(this.drawableObjects[i].rotation);
									this.drawableObjects[i].base_draw(ctx);
									ctx.restore();
								}
						},
	&#x2F;**
	Will check if this object is visible and if so will update itself to the canvas plus all its children.
	@method base_update
	@returns {Boolean} false if inactive
	*&#x2F;
	base_update	 	: 	function()
						{
							if(!this.active)
								return false;
							
							this.update();
							
							for(var i = 0; i &lt; this.drawableObjects.length; i++)
								if(this.drawableObjects[i])
									this.drawableObjects[i].base_update();
						},
	&#x2F;**
	Contains the HTML5 redering part for this object.
	@method draw
	@param ctx {Object} Requires the canvas context element.
	*&#x2F;
	draw			:	function(ctx) {},
	&#x2F;**
	Will be called before every draw call.
	@method update   
	*&#x2F;
	update	 		: 	function() {},
	&#x2F;**
	Will be called when this object is added into the drawlist of another object.
	@method setParent
	@param parent {BaseDrawable} the parent object
	*&#x2F;
	setParent		:	function(parent)
						{
							this.parent = parent;
						},
	&#x2F;**
	Will add a new object as child and will render it in the future.
	@method addDrawable
	@param elem {BaseDrawable} Element (object) of base type &lt;BaseDrawable&gt; to be added into the rendering list.
	@param depth {Number} When should this element be drawn? the lowest will be drawn at the most back.
	*&#x2F;
	addDrawable		:	function(elem, depth)
						{
							if(depth == null || depth == undefined)
							{
								index = this.drawableObjects.length;
								depth = (index &gt; 0) ? this.drawableObjects[index - 1].depth + 1 : 0;
							}
							else
							{
								var index = 0;
								for(var i = 0; i &lt; this.drawableObjects.length; i++)
									if(depth &gt;= this.drawableObjects[i].depth)
										index = i + 1;
							}
							elem.depth = depth;
							elem.setParent(this);
											
							this.drawableObjects.insert(index, elem);
							if(elem.onDrawInit) elem.onDrawInit();
						},
	&#x2F;**
	Removes a &lt;BaseDrawable&gt; from the drawing list.
	@method removeDrawable
	@param elem {BaseDrawable} Element (object) of base type &lt;BaseDrawable&gt; to be removed from the rendering list.
	*&#x2F;
	removeDrawable	:	function(elem)
						{
							for(var i = 0; i &lt; this.drawableObjects.length; i++)
								if(this.drawableObjects[i] == elem)
								{
									delete this.drawableObjects[i];
									this.drawableObjects.splice(i, 1)
									break;
								}
						},
	&#x2F;**
	Checks through its children and returns the first one that contains the position [x, y]. If none is found, returns itself.
	@method getobjectatpos
	@param x {Number} X co-ordinate to check at
	@param y {Number} Y co-ordinate to check at
	@returns {BaseDrawable}  Most forward child at position [x, y] or itself.
	*&#x2F;
	getobjectatpos	:	function(x, y)
						{
							if(!x || !y)
								return this;
							
							x -= this.position.x;
							y -= this.position.y;
							
							if(this.drawableObjects &amp;&amp; this.drawableObjects.length &gt; 0)
								for(var i = this.drawableObjects.length - 1; i &gt;= 0; i--)
									if(	x &gt;= this.drawableObjects[i].position.x &amp;&amp; x &lt;= this.drawableObjects[i].position.x + this.drawableObjects[i].size.x &amp;&amp;
										y &gt;= this.drawableObjects[i].position.y &amp;&amp; y &lt;= this.drawableObjects[i].position.y + this.drawableObjects[i].size.y &amp;&amp;
										this.drawableObjects[i].visible)
										return this.drawableObjects[i].getobjectatpos(x, y);
							
							return this;
						},
	&#x2F;**
	Triggered when the object is clicked.
	@method onclick
	*&#x2F;
	onclick			:	function() {},
	&#x2F;**
	Triggered when the mouse hovers over the object.
	@method onhover
	*&#x2F;
	onhover			:	function() {},
	&#x2F;**
	Triggered when the mouse moves out of the object.
	@method onmouseout
	*&#x2F;
	onmouseout		:	function() {}
};

	&#x2F;**
	Object that is drawn as a rectangle. As with every drawable object, it inherits from &lt;BaseDrawable&gt;.
	@class RectangleDrawable
	@extends Model.Drawables.BaseDrawable
	*&#x2F;

Model.Drawables.RectangleDrawable = Model.Drawables.BaseDrawable.clone();
	&#x2F;**
	The colour of the rectangle&#x27;s border
	@property borderColor
	@type String
	@default &quot;#000000&quot;
	*&#x2F;
Model.Drawables.RectangleDrawable.borderColor = &quot;#000000&quot;;
	&#x2F;**
	The width of the rectangle&#x27;s border
	@property borderWidth
	@type Number
	@default 0
	*&#x2F;
Model.Drawables.RectangleDrawable.borderWidth = 0;

	&#x2F;**
	Draws the rectangle.
	@method draw
	@param ctx {Object} Requires the canvas context element.
	*&#x2F;
Model.Drawables.RectangleDrawable.draw = function(ctx)
{
	if(this.borderWidth &gt; 0)
	{
		ctx.lineWidth = this.borderWidth;
		ctx.strokeStyle = this.borderColor;
		ctx.strokeRect(-(this.size.x &#x2F; 2), -(this.size.y &#x2F; 2), this.size.x * this.scale.x, this.size.y * this.scale.y);
	}
	
	ctx.fillStyle = this.color;
	ctx.fillRect(-(this.size.x &#x2F; 2), -(this.size.y &#x2F; 2), this.size.x * this.scale.x, this.size.y * this.scale.y);
}
	
	&#x2F;**
	A textbox. As with every drawable object, it inherits from &lt;BaseDrawable&gt;.
	@class TextDrawable
	@extends Model.Drawables.BaseDrawable
	*&#x2F;
Model.Drawables.TextDrawable = Model.Drawables.BaseDrawable.clone();
	&#x2F;**
	Contains the text to draw
	@property text
	@type String
	@default &quot;&quot;
	*&#x2F;
Model.Drawables.TextDrawable.text = &quot;&quot;;
	&#x2F;**
	The colour of the text box&#x27;s border
	@property borderColor
	@type String
	@default &quot;#000000&quot;
	*&#x2F;
Model.Drawables.TextDrawable.borderColor = &quot;#000000&quot;;
	&#x2F;**
	The width of the text box&#x27;s border
	@property BorderWidth
	@type Number
	@default 0
	*&#x2F;
Model.Drawables.TextDrawable.borderWidth = 0;
	&#x2F;**
	Determines the font information to use when drawing the text.
	@property font
	@type String
	@default &quot;normal 12px Arial&quot;
	*&#x2F;
Model.Drawables.TextDrawable.font = &quot;normal 12px Arial&quot;;

	&#x2F;**
	Draws the text.
	@method draw
	@param ctx {Object} Requires the canvas context element.
	*&#x2F;
Model.Drawables.TextDrawable.draw =		function(ctx)
{
	if(this.text !== &quot;&quot;)
	{
		this.setStyle(ctx);
		
		if(this.borderWidth &gt; 0)
		{
			ctx.lineWidth = this.borderWidth;
			ctx.strokeStyle = this.borderColor;
			ctx.strokeText(this.text, -(this.size.x &#x2F; 2), -(this.size.y &#x2F; 2), this.size.x);
		}
		ctx.fillText(this.text, -(this.size.x &#x2F; 2), -(this.size.y &#x2F; 2), this.size.x);
	}
}
	&#x2F;**
	Experimently function, goal is to make it only switch fonts if necesary.
	@method setStyle
	@param ctx {Object} Requires the canvas context element.
	*&#x2F;
Model.Drawables.TextDrawable.setStyle = function(ctx) 
{
		ctx.font = this.font;
		ctx.fillStyle = this.color;
		ctx.textBaseline = &#x27;top&#x27;
};
	&#x2F;**
	Sets the text. Automatically adjusts the width of the object so it fits the complete new text.
	@method setText
	@param ctx {Object} Requires the canvas context element.
	*&#x2F;
Model.Drawables.TextDrawable.setText =	function(text)
{
	this.text = text;
	View.ctx.font = this.font;
	View.ctx.fillStyle = this.color;
	View.ctx.textBaseline = &#x27;top&#x27;;
	this.size.x = View.ctx.measureText(text).width;
}
						
	&#x2F;**
	An object that is drawn as an image. As with every drawable object, it inherits from &lt;BaseDrawable&gt;.
	@class SpriteDrawable
	@extends Model.Drawables.BaseDrawable
	*&#x2F;
	
Model.Drawables.SpriteDrawable = Model.Drawables.BaseDrawable.clone();
	&#x2F;**
	Contains image element used to draw.
	@property _image
	@type Image
	@default Empty Image
	*&#x2F;
Model.Drawables.SpriteDrawable._image = new Image();
	&#x2F;**
	Contains the source link or path for the current image.
	@property curImage
	@type String
	@default &quot;&quot;
	*&#x2F;
Model.Drawables.SpriteDrawable.curImage = &quot;&quot;;

	&#x2F;**
	Magic function that is called when the image has been loaded onto the user&#x27;s computer.
	@method onload
	*&#x2F;
Model.Drawables.SpriteDrawable.onload = function ()
{
	this.loaded = true;
}
	&#x2F;**
	Used to load an image into the sprite. Also sets curImage to the given path.
	@method load
	@param src {Image} The source of the image to load in as a full or relative link&#x2F;path.
	*&#x2F;
Model.Drawables.SpriteDrawable.load = 	function(src)
{
	this._image.onload = this.onload; &#x2F;&#x2F; workaround
	this._image.src = src;
	this.curImage = src;
}
	&#x2F;**
	Draws the image if it has been loaded.
	@method draw
	@param ctx {Object} Requires the canvas context element.
	*&#x2F;
Model.Drawables.SpriteDrawable.draw = 	function(ctx)
{
	if(this._image.loaded)
	{
		ctx.drawImage(this._image, -(this.size.x &#x2F; 2), -(this.size.y &#x2F; 2), this.size.x * this.scale.x, this.size.y * this.scale.y);
	}
}

	&#x2F;**
	A button object. Inherits from &lt;SpriteDrawable&gt;, which inherits from &lt;BaseDrawable&gt;.
	@class ButtonDrawable
	@extends Model.Drawables.SpriteDrawable
	*&#x2F;
Model.Drawables.ButtonDrawable = Model.Drawables.SpriteDrawable.clone();
	&#x2F;**
	Text to draw on the button. Leave empty to draw no text.
	@property text
	@type String
	@default &quot;&quot;
	*&#x2F;
Model.Drawables.ButtonDrawable.text = &quot;&quot;;
	&#x2F;**
	Font to use for drawing the text.
	@property font
	@type String
	@default &quot;normal 12px Arial&quot;
	*&#x2F;
Model.Drawables.ButtonDrawable.font = &quot;normal 12px Arial&quot;;
	&#x2F;**
	Cursor type to show when hovering this object, see a html cursors table for this
	@property cursor
	@type String
	@default &quot;pointer&quot;
	*&#x2F;
Model.Drawables.ButtonDrawable.cursor = &quot;pointer&quot;;
	&#x2F;**
	Position of the button&#x27;s text, relative to its own.
	@property textPos
	@type Object
	@default [5, 5]
	*&#x2F;
Model.Drawables.ButtonDrawable.textPos = [5, 5];

	&#x2F;**
	Triggered when the object is clicked. If this function is not changed, it will also trigger the function nameofobject_onclick if it is defined outside any class.
	@method onclick
	*&#x2F;
Model.Drawables.ButtonDrawable.onclick = function()
{
	var func = window[this.name + &quot;_onclick&quot;];
	if(func)
		func();
}
	&#x2F;**
	Draws the button and its text if it has it.
	@method draw
	@param ctx {Object} Requires the canvas context element.
	*&#x2F;
Model.Drawables.ButtonDrawable.draw = 	function(ctx)
{
	if(this._image.loaded)
	{
		ctx.drawImage(this._image, -(this.size.x &#x2F; 2), -(this.size.y &#x2F; 2), this.size.x * this.scale.x, this.size.y * this.scale.y);
		if(this.text !== &quot;&quot;)
		{
			ctx.font = this.font;
			ctx.fillStyle = this.color;
			ctx.textBaseline = &#x27;top&#x27;;
			ctx.fillText(this.text, -(this.size.x &#x2F; 2) + this.textPos[0], -(this.size.y &#x2F; 2) + this.textPos[1], this.size.x);
		}
	}
}

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
